
parameters:
- name: 'buildName'
  type: string
  default: 'buildname-not-set'

variables:
  NUGET_PACKAGES: $(Pipeline.Workspace)/.nuget/packages
  buildNumber: $[counter('buildNumber', 1)]
  buildNumber2: ${{counter('buildNumber2', 1)}}
  buildVersion: '1.1.$(buildNumber)'
  buildConfiguration: 'Release'
  isMasterBuild: $[in(variables['Build.SourceBranchName'], 'master', 'azure-pipelines')]
  isHotfix: $[startsWith(variables['Build.SourceBranchName'], 'hotfix')]
  pushToOctopus: $[or(variables['isMasterBuild'],variables['isHotfix'])]
  ${{ if eq(variables['Build.SourceBranchName'], 'master') }}:
    buildBranch:    
  ${{ if not(eq(variables['Build.SourceBranchName'], 'master')) }}:
    buildBranch: -$(Build.SourceBranchName)    
  packageVersion: ${{variables.buildVersion}}${{variables.buildBranch}}
  buildName: ${{parameters.buildName}}.${{variables.buildVersion}}${{variables.buildBranch}}
  year: $[format('{0:yyyy}', pipeline.startTime)]
  copyright: 'Copyright Â© Savanta Group Ltd. $(year)'
